window.__require=function e(t,c,n){function o(r,i){if(!c[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!i&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}}var d=c[r]={exports:{}};t[r][0].call(d.exports,function(e){return o(t[r][1][e]||e)},d,d.exports,e,t,c,n)}return c[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)o(n[r]);return o}({common:[function(e,t,c){"use strict";cc._RF.push(t,"2ee04yFHCRNvJh8tfddyfl5","common");var n={};cc.loader.loadRes("AS",cc.SpriteFrame,function(e,t){n.AS=t}),cc.loader.loadRes("AH",cc.SpriteFrame,function(e,t){n.AH=t}),cc.loader.loadRes("AC",cc.SpriteFrame,function(e,t){n.AC=t}),cc.loader.loadRes("AD",cc.SpriteFrame,function(e,t){n.AD=t}),cc.loader.loadRes("2S",cc.SpriteFrame,function(e,t){n["2S"]=t}),cc.loader.loadRes("2H",cc.SpriteFrame,function(e,t){n["2H"]=t}),cc.loader.loadRes("2C",cc.SpriteFrame,function(e,t){n["2C"]=t}),cc.loader.loadRes("2D",cc.SpriteFrame,function(e,t){n["2D"]=t}),cc.loader.loadRes("3S",cc.SpriteFrame,function(e,t){n["3S"]=t}),cc.loader.loadRes("3H",cc.SpriteFrame,function(e,t){n["3H"]=t}),cc.loader.loadRes("3C",cc.SpriteFrame,function(e,t){n["3C"]=t}),cc.loader.loadRes("3D",cc.SpriteFrame,function(e,t){n["3D"]=t}),cc.loader.loadRes("4S",cc.SpriteFrame,function(e,t){n["4S"]=t}),cc.loader.loadRes("4H",cc.SpriteFrame,function(e,t){n["4H"]=t}),cc.loader.loadRes("4C",cc.SpriteFrame,function(e,t){n["4C"]=t}),cc.loader.loadRes("4D",cc.SpriteFrame,function(e,t){n["4D"]=t}),cc.loader.loadRes("5S",cc.SpriteFrame,function(e,t){n["5S"]=t}),cc.loader.loadRes("5H",cc.SpriteFrame,function(e,t){n["5H"]=t}),cc.loader.loadRes("5C",cc.SpriteFrame,function(e,t){n["5C"]=t}),cc.loader.loadRes("5D",cc.SpriteFrame,function(e,t){n["5D"]=t}),cc.loader.loadRes("6S",cc.SpriteFrame,function(e,t){n["6S"]=t}),cc.loader.loadRes("6H",cc.SpriteFrame,function(e,t){n["6H"]=t}),cc.loader.loadRes("6C",cc.SpriteFrame,function(e,t){n["6C"]=t}),cc.loader.loadRes("6D",cc.SpriteFrame,function(e,t){n["6D"]=t}),cc.loader.loadRes("7S",cc.SpriteFrame,function(e,t){n["7S"]=t}),cc.loader.loadRes("7H",cc.SpriteFrame,function(e,t){n["7H"]=t}),cc.loader.loadRes("7C",cc.SpriteFrame,function(e,t){n["7C"]=t}),cc.loader.loadRes("7D",cc.SpriteFrame,function(e,t){n["7D"]=t}),cc.loader.loadRes("8S",cc.SpriteFrame,function(e,t){n["8S"]=t}),cc.loader.loadRes("8H",cc.SpriteFrame,function(e,t){n["8H"]=t}),cc.loader.loadRes("8C",cc.SpriteFrame,function(e,t){n["8C"]=t}),cc.loader.loadRes("8D",cc.SpriteFrame,function(e,t){n["8D"]=t}),cc.loader.loadRes("9S",cc.SpriteFrame,function(e,t){n["9S"]=t}),cc.loader.loadRes("9H",cc.SpriteFrame,function(e,t){n["9H"]=t}),cc.loader.loadRes("9C",cc.SpriteFrame,function(e,t){n["9C"]=t}),cc.loader.loadRes("9D",cc.SpriteFrame,function(e,t){n["9D"]=t}),cc.loader.loadRes("10S",cc.SpriteFrame,function(e,t){n["10S"]=t}),cc.loader.loadRes("10H",cc.SpriteFrame,function(e,t){n["10H"]=t}),cc.loader.loadRes("10C",cc.SpriteFrame,function(e,t){n["10C"]=t}),cc.loader.loadRes("10D",cc.SpriteFrame,function(e,t){n["10D"]=t}),cc.loader.loadRes("JS",cc.SpriteFrame,function(e,t){n.JS=t}),cc.loader.loadRes("JH",cc.SpriteFrame,function(e,t){n.JH=t}),cc.loader.loadRes("JC",cc.SpriteFrame,function(e,t){n.JC=t}),cc.loader.loadRes("JD",cc.SpriteFrame,function(e,t){n.JD=t}),cc.loader.loadRes("QS",cc.SpriteFrame,function(e,t){n.QS=t}),cc.loader.loadRes("QH",cc.SpriteFrame,function(e,t){n.QH=t}),cc.loader.loadRes("QC",cc.SpriteFrame,function(e,t){n.QC=t}),cc.loader.loadRes("QD",cc.SpriteFrame,function(e,t){n.QD=t}),cc.loader.loadRes("KS",cc.SpriteFrame,function(e,t){n.KS=t}),cc.loader.loadRes("KH",cc.SpriteFrame,function(e,t){n.KH=t}),cc.loader.loadRes("KC",cc.SpriteFrame,function(e,t){n.KC=t}),cc.loader.loadRes("KD",cc.SpriteFrame,function(e,t){n.KD=t}),cc.loader.loadRes("JK1",cc.SpriteFrame,function(e,t){n.JK1=t}),cc.loader.loadRes("JK2",cc.SpriteFrame,function(e,t){n.JK2=t}),cc.loader.loadRes("back",cc.SpriteFrame,function(e,t){n.back=t});var o={getValue:function(e){return cc.sys.localStorage.getItem(e)},setParameter:function(e,t){cc.sys.localStorage.setItem(e,t)},loadCardImg:function(e,t){cc.loader.loadRes(t,cc.SpriteFrame,function(c,o){e.spriteFrame=n[t],e.node.opacity=255})}};t.exports=o,cc._RF.pop()},{}],"index-card":[function(e,t,c){"use strict";cc._RF.push(t,"5cd85Uz2SBJCq8GOFkiwavT","index-card"),cc.Class({extends:cc.Component,properties:{rSpeed:100,xSpeed:150,minRotation:-40,maxRotation:40,endX:0},start:function(){this.node.x=-50,this.updateY()},updateY:function(){this.node.y=this.node.x*this.node.x/-100+100},update:function(e){-1*this.node.angle<this.maxRotation?(this.node.angle-=this.rSpeed*e,this.node.x+=this.xSpeed*e,this.updateY()):(this.node.angle=-this.maxRotation,this.endX>0&&(this.node.x=this.endX,this.updateY()))}}),cc._RF.pop()},{}],"index-create":[function(e,t,c){"use strict";cc._RF.push(t,"f74d0IvC6RFUqVD8bQNZyAk","index-create");var n=e("common");cc.Class({extends:cc.Component,properties:{username:{default:null,type:cc.EditBox}},onLoad:function(){var e=this;this.node.on("click",function(t){var c=e.username.string.trim();""!=c?(n.setParameter("isHost","true"),n.setParameter("nickname",c),cc.director.loadScene("play")):window.alert("\u7528\u6237\u6635\u79f0\u4e0d\u80fd\u4e3a\u7a7a")})},start:function(){}}),cc._RF.pop()},{common:"common"}],"index-init":[function(e,t,c){"use strict";cc._RF.push(t,"1415aShMYhDXo0qlCcFoX5K","index-init");var n=e("common");cc.Class({extends:cc.Component,properties:{editAreaForJoin:{default:null,type:cc.Node}},onLoad:function(){cc.director.setClearColor(cc.color(4,148,44,1)),n.setParameter("autoStart","false"),n.setParameter("serverEndPoint","/")},start:function(){this.editAreaForJoin.active=!1}}),cc._RF.pop()},{common:"common"}],"index-join":[function(e,t,c){"use strict";cc._RF.push(t,"7edc0HAU55Keq50Vij5FocH","index-join");var n=e("common");cc.Class({extends:cc.Component,properties:{roomNumber:{default:null,type:cc.EditBox},username:{default:null,type:cc.EditBox}},onLoad:function(){var e=this;this.node.on("click",function(t){if(e.checkEdit(e.roomNumber,"\u623f\u95f4\u53f7")&&e.checkEdit(e.username,"\u7528\u6237\u6635\u79f0")){var c=e.roomNumber.string.trim(),o=e.username.string.trim(),a=n.getValue("serverEndPoint")+"joinRoom/"+c+"/"+o;$.get(a,function(e){0==e.code?(n.setParameter("isHost","false"),n.setParameter("nickname",o),n.setParameter("roomNumber",c),cc.director.loadScene("play")):alert(e.msgs[0])})}})},checkEdit:function(e,t){return""!=e.string.trim()||(window.alert(t+"\u4e0d\u80fd\u4e3a\u7a7a"),!1)},start:function(){}}),cc._RF.pop()},{common:"common"}],"index-select":[function(e,t,c){"use strict";cc._RF.push(t,"04b9doWX6xNJLFy9jgvzCTb","index-select"),cc.Class({extends:cc.Component,properties:{editAreaForCreate:{default:null,type:cc.Node},editAreaForJoin:{default:null,type:cc.Node},target:""},start:function(){var e=this;this.node.on("click",function(t){e.editAreaForCreate.active="create"==e.target,e.editAreaForJoin.active="join"==e.target})},update:function(e){}}),cc._RF.pop()},{}],"index-title":[function(e,t,c){"use strict";cc._RF.push(t,"66037QywNVHB7rP6aImgy/G","index-title"),cc.Class({extends:cc.Component,properties:{zoomSpeed:50,label:null},start:function(){this.label=this.node.getComponent(cc.Label),this.label.fontSize=1},update:function(e){this.label.fontSize<40&&(this.label.fontSize+=this.zoomSpeed*e)}}),cc._RF.pop()},{}],"play-exit":[function(e,t,c){"use strict";cc._RF.push(t,"ccae7oPo2RClKoz0+XwqVof","play-exit");var n=e("common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("click",function(e){var t=n.getValue("isHost"),c=n.getValue("serverEndPoint"),o=n.getValue("nickname"),a=n.getValue("roomNumber");"false"==t?$.get(c+"exitRoom/"+a+"/"+o,function(e){0==e.code?(clearInterval(n.getValue("clearId")),cc.director.loadScene("index")):alert(e.msgs[0])}):$.get(c+"endGame/"+a+"/"+o,function(e){0==e.code?(clearInterval(n.getValue("clearId")),cc.director.loadScene("result")):alert(e.msgs[0])})})},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}],"play-fill":[function(e,t,c){"use strict";cc._RF.push(t,"548a2y/DFpNzrkbOncmYYm1","play-fill");var n=e("common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("click",function(e){var t=n.getValue("serverEndPoint"),c=n.getValue("nickname"),o=n.getValue("roomNumber");$.get(t+"lockCards/"+o+"/"+c+"/true",function(t){1==t.code?alert(t.msgs[0]):e.interactable=!1})})},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}],"play-init":[function(e,t,c){"use strict";cc._RF.push(t,"3febckOzn5LhLjetEAHbsot","play-init");var n=e("common");cc.Class({extends:cc.Component,properties:{playerNodes:{default:null,type:cc.Node},startBtn:{default:null,type:cc.Button},exitTxt:{default:null,type:cc.Label},isHost:null,serverUrl:null,nickname:null,roomNumber:null,roomNumberTxt:{default:null,type:cc.Label},playerTemplate:{default:null,type:cc.Node},ghostCardNode:{default:null,type:cc.Node},fillBtn:{default:null,type:cc.Button},notFillBtn:{default:null,type:cc.Button},exitBtn:{default:null,type:cc.Button},room:null},onLoad:function(){var e=this;this.isHost=n.getValue("isHost"),this.serverUrl=n.getValue("serverEndPoint"),this.nickname=n.getValue("nickname"),this.roomNumber=n.getValue("roomNumber"),cc.director.setClearColor(cc.color(4,148,44,255)),"false"==this.isHost?(this.startBtn.target.destroy(),this.exitTxt.string="\u9000\u51fa\u623f\u95f4",this.roomNumberTxt.string=this.roomNumber):$.get(this.serverUrl+"createRoom/"+this.nickname,function(t){e.roomNumber=t.data,e.roomNumberTxt.string=e.roomNumber,n.setParameter("roomNumber",e.roomNumber)}),this.ghostCardNode.active=!1,this.notFillBtn.interactable=!1,this.fillBtn.interactable=!1;var t=[],c=setInterval(function(){$.get(e.serverUrl+"getRoomInfo/"+e.roomNumber,function(c){var o=c.data,a="In"==o.status||"Calculated"==o.status;e.ghostCardNode.active=a,a&&(e.exitBtn.interactable=!1),e.fillBtn.interactable=!1,e.notFillBtn.interactable=!1,a&&n.loadCardImg(e.ghostCardNode.getComponentInChildren(cc.Sprite),o.stage.extraGhost.name);var r=0;for(var i in o.players){var s=o.players[i];"Ready"!=s.status&&r++;var l=t[i];l||((l=cc.instantiate(e.playerTemplate)).getComponentsInChildren(cc.Label)[0].string=s.nickname,l.y=e.playerTemplate.y-110*parseInt(i/2),i%2==1&&(l.x=e.playerTemplate.x+400),l.opacity=255,l.parent=e.playerNodes,t.push(l));var d=l.getComponentsInChildren(cc.Label),u=(l.getComponentsInChildren(cc.Sprite),s.nickname==e.nickname);if(u&&"Locked"==s.status&&null!=s.times)switch(s.times.priority){case 8:switch(s.times.value){case 1:d[2].string=s.points+"\u70b9";break;default:d[2].string=s.times.name+s.points}break;case 2:case 3:case 6:switch(s.points){case 11:d[2].string=s.times.name+"J";break;case 12:d[2].string=s.times.name+"Q";break;case 13:d[2].string=s.times.name+"K";break;default:d[2].string=s.times.name+s.points}break;default:d[2].string=s.times.name}else d[2].string="";u&&o.stage&&o.stage.currentTurn==s.index&&"Ready"==s.status&&(e.fillBtn.interactable=!0,e.notFillBtn.interactable=!0),d[1].string="\u5f97\u5206: "+s.amount}for(;o.players.length<t.length;){var m=t.length-1;t[m].destroy(),t.splice(m,1)}if(r==o.players.length&&r>0){"true"==e.isHost&&(e.startBtn.interactable=!0),e.exitBtn.interactable=!0;var p=function(e){var c=o.players[e],a=t[e],r=a.getComponentsInChildren(cc.Label),i=a.getComponentsInChildren(cc.Sprite);if("Locked"==c.status){if(null!=c.times)switch(c.times.priority){case 8:switch(c.times.value){case 1:r[2].string=c.points+"\u70b9";break;default:r[2].string=c.times.name+c.points}break;case 2:case 3:case 6:switch(c.points){case 11:r[2].string=c.times.name+"J";break;case 12:r[2].string=c.times.name+"Q";break;case 13:r[2].string=c.times.name+"K";break;default:r[2].string=c.times.name+c.points}break;default:r[2].string=c.times.name}i.map(function(e,t){e.node.getComponentInChildren(cc.Label).node.opacity=0;var a=c.cards[t];a&&(n.loadCardImg(e,a.name),a.index==o.stage.extraGhost.index&&(e.node.getComponentInChildren(cc.Label).node.opacity=255))})}else"Exit"==c.status&&(r[1].string="\u5f97\u5206: "+c.amount,r[2].string="\u5df2\u9000\u51fa",i.map(function(e,t){n.loadCardImg(e,"back")}))};for(var f in t)p(f);"false"==n.getValue("calculated")&&(n.setParameter("calculated","true"),"true"==e.isHost&&$.get(e.serverUrl+"calResult/"+e.roomNumber+"/"+e.nickname,function(t){0==t.code&&setTimeout(function(){$.get(e.serverUrl+"getRoomInfo/"+e.roomNumber,function(e){e.data.status})},15e3)}))}else{var g=function(c){var a=o.players[c],r=t[c],i=r.getComponentsInChildren(cc.Label),s=r.getComponentsInChildren(cc.Sprite);if("Exit"==a.status)i[1].string="\u5f97\u5206: "+a.amount,i[2].string="\u5df2\u9000\u51fa",s.map(function(e,t){n.loadCardImg(e,"back")});else{var l=a.nickname==e.nickname;s.map(function(e,t){e.node.getComponentInChildren(cc.Label).node.opacity=0;var c=a.cards[t];c?l?(n.loadCardImg(e,c.name),c.index==o.stage.extraGhost.index&&(e.node.getComponentInChildren(cc.Label).node.opacity=255)):n.loadCardImg(e,"back"):e.node.opacity=0})}};for(var h in t)g(h)}"End"==o.status&&"false"==e.isHost&&(clearInterval(n.getValue("clearId")),cc.director.loadScene("result"))})},1e3);n.setParameter("clearId",c)},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}],"play-lock":[function(e,t,c){"use strict";cc._RF.push(t,"1cc14CJQ8hNiLb3ZOXaREyO","play-lock");var n=e("common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("click",function(e){var t=n.getValue("serverEndPoint"),c=n.getValue("nickname"),o=n.getValue("roomNumber");$.get(t+"lockCards/"+o+"/"+c+"/false",function(t){1==t.code?alert(t.msgs[0]):e.interactable=!1})})},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}],"play-start":[function(e,t,c){"use strict";cc._RF.push(t,"620d9/MqqtBa4Bhmtuxfe48","play-start");var n=e("common");cc.Class({extends:cc.Component,properties:{exitBtn:{default:null,type:cc.Button},startBtn:{default:null,type:cc.Button}},onLoad:function(){var e=this;function t(){n.setParameter("autoStart","false");var t=n.getValue("serverEndPoint"),c=n.getValue("nickname"),o=n.getValue("roomNumber");$.get(t+"startGame/"+o+"/"+c,function(t){1==t.code?alert(t.msgs[0]):(n.setParameter("calculated","false"),e.startBtn.interactable=!1,e.exitBtn.interactable=!1)})}this.node.on("click",function(e){t()}),setInterval(function(){"true"==n.getValue("autoStart")&&t()},1e3)},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}],"result-exit":[function(e,t,c){"use strict";cc._RF.push(t,"988b66XgMJIDJZLjB20zBPY","result-exit");var n=e("common");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("click",function(e){var t=n.getValue("isHost"),c=n.getValue("serverEndPoint"),o=n.getValue("nickname"),a=n.getValue("roomNumber");"false"==t?cc.director.loadScene("index"):$.get(c+"closeRoom/"+a+"/"+o,function(){cc.director.loadScene("index")})})},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}],"result-init":[function(e,t,c){"use strict";cc._RF.push(t,"d8e2er5rG1G35b98vqXlIyp","result-init");var n=e("common");cc.Class({extends:cc.Component,properties:{serverUrl:null,isHost:null,nickname:null,roomNumber:null,content:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.isHost=n.getValue("isHost"),this.serverUrl=n.getValue("serverEndPoint"),this.nickname=n.getValue("nickname"),this.roomNumber=n.getValue("roomNumber"),cc.director.setClearColor(cc.color(4,148,44,255)),$.get(this.serverUrl+"getRoomInfo/"+this.roomNumber,function(t){var c=t.data;for(var n in c.players){var o=c.players[n],a=new cc.Node,r=a.addComponent(cc.Label);r.string=o.nickname+": "+o.amount,r.fontSize=20,a.x=-400,a.y=-25-60*parseInt(n/2),n%2==1&&(a.x=0),a.parent=e.content}})},start:function(){},update:function(e){}}),cc._RF.pop()},{common:"common"}]},{},["common","index-card","index-create","index-init","index-join","index-select","index-title","play-exit","play-fill","play-init","play-lock","play-start","result-exit","result-init"]);